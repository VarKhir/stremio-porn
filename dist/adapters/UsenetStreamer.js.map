{"version":3,"sources":["../../src/adapters/UsenetStreamer.js"],"names":["UsenetStreamer","BaseAdapter","constructor","httpClient","options","baseUrl","replace","supportsId","id","test","_normalizeStream","stream","name","DISPLAY_NAME","title","_findByPage","_getItem","_getStreams","type","url","encodeURIComponent","body","request","json","streams","Array","isArray"],"mappings":";;;;;;;AAAA;;;;;;;;;;AAGA,MAAMA,cAAN,SAA6BC,oBAA7B,CAAyC;AAKvCC,cAAYC,UAAZ,EAAwBC,UAAU,EAAlC,EAAsC;AACpC,UAAMD,UAAN;AACA,SAAKE,OAAL,GAAeD,QAAQC,OAAR,GAAkBD,QAAQC,OAAR,CAAgBC,OAAhB,CAAwB,MAAxB,EAAgC,EAAhC,CAAlB,GAAwD,EAAvE;AACD;;AAEDC,aAAWC,EAAX,EAAe;AACb,QAAI,CAAC,KAAKH,OAAN,IAAiB,CAACG,EAAtB,EAA0B;AACxB,aAAO,KAAP;AACD;;AAED,WAAO,UAAUC,IAAV,CAAeD,EAAf,KACL,UAAUC,IAAV,CAAeD,EAAf,CADK,IAEL,UAAUC,IAAV,CAAeD,EAAf,CAFK,IAGL,YAAYC,IAAZ,CAAiBD,EAAjB,CAHF;AAID;;AAEDE,mBAAiBC,MAAjB,EAAyB;AACvB,WAAO,MAAMD,gBAAN,mBACFC,MADE;AAELC,YAAMD,OAAOC,IAAP,IAAe,KAAKV,WAAL,CAAiBW,YAFjC;AAGLC,aAAOH,OAAOG,KAAP,IAAgBH,OAAOC,IAAvB,IAA+B,KAAKV,WAAL,CAAiBW;AAHlD,OAAP;AAKD;;AAEKE,aAAN,GAAoB;AAAA;AAClB;AACA,aAAO,EAAP;AAFkB;AAGnB;;AAEKC,UAAN,GAAiB;AAAA;AACf,aAAO,IAAP;AADe;AAEhB;;AAEKC,aAAN,CAAkBC,IAAlB,EAAwBV,EAAxB,EAA4B;AAAA;;AAAA;AAC1B,UAAI,CAAC,MAAKH,OAAV,EAAmB;AACjB,eAAO,EAAP;AACD;;AAED,UAAIc,MAAO,GAAE,MAAKd,OAAQ,WAAUa,IAAK,IAAGE,mBAAmBZ,EAAnB,CAAuB,OAAnE;AACA,UAAI;AAAEa;AAAF,gBAAiB,MAAKlB,UAAL,CAAgBmB,OAAhB,CAAwBH,GAAxB,EAA6B;AAAEI,cAAM;AAAR,OAA7B,CAArB;AACA,UAAIC,UAAUC,MAAMC,OAAN,CAAcL,IAAd,IAAsBA,IAAtB,GAA6BA,KAAKG,OAAhD;AAEA,aAAOC,MAAMC,OAAN,CAAcF,OAAd,IAAyBA,OAAzB,GAAmC,EAA1C;AAT0B;AAU3B;;AAhDsC;;gDAAnCxB,c,kBACkB,Q,sBACG,CAAC,OAAD,EAAU,IAAV,C,iBACL,Q;;eAiDPA,c","sourcesContent":["import BaseAdapter from './BaseAdapter'\n\n\nclass UsenetStreamer extends BaseAdapter {\n  static DISPLAY_NAME = 'Usenet'\n  static SUPPORTED_TYPES = ['movie', 'tv']\n  static CATALOG_ID = 'usenet'\n\n  constructor(httpClient, options = {}) {\n    super(httpClient)\n    this.baseUrl = options.baseUrl ? options.baseUrl.replace(/\\/+$/, '') : ''\n  }\n\n  supportsId(id) {\n    if (!this.baseUrl || !id) {\n      return false\n    }\n\n    return /^tt\\d+/i.test(id) ||\n      /^tmdb:/i.test(id) ||\n      /^tvdb:/i.test(id) ||\n      /^nzbdav:/i.test(id)\n  }\n\n  _normalizeStream(stream) {\n    return super._normalizeStream({\n      ...stream,\n      name: stream.name || this.constructor.DISPLAY_NAME,\n      title: stream.title || stream.name || this.constructor.DISPLAY_NAME,\n    })\n  }\n\n  async _findByPage() {\n    // UsenetStreamer does not expose catalogs; discovery is handled by other adapters.\n    return []\n  }\n\n  async _getItem() {\n    return null\n  }\n\n  async _getStreams(type, id) {\n    if (!this.baseUrl) {\n      return []\n    }\n\n    let url = `${this.baseUrl}/stream/${type}/${encodeURIComponent(id)}.json`\n    let { body } = await this.httpClient.request(url, { json: true })\n    let streams = Array.isArray(body) ? body : body.streams\n\n    return Array.isArray(streams) ? streams : []\n  }\n}\n\n\nexport default UsenetStreamer\n"],"file":"UsenetStreamer.js"}